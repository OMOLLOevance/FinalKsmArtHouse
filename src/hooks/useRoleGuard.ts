import { useAuth } from '@/contexts/AuthContext';\n\ntype UserRole = 'staff' | 'operations_manager' | 'director' | 'investor';\n\ninterface RolePermissions {\n  canCreate: boolean;\n  canReadAll: boolean;\n  canReadOwn: boolean;\n  canDelete: boolean;\n}\n\nexport function useRoleGuard() {\n  const { user } = useAuth();\n  const userRole = user?.role as UserRole || 'staff';\n\n  const getPermissions = (): RolePermissions => {\n    switch (userRole) {\n      case 'staff':\n        return {\n          canCreate: true,\n          canReadAll: false,\n          canReadOwn: true,\n          canDelete: false,\n        };\n      case 'operations_manager':\n        return {\n          canCreate: true,\n          canReadAll: true,\n          canReadOwn: true,\n          canDelete: false,\n        };\n      case 'director':\n      case 'investor':\n        return {\n          canCreate: true,\n          canReadAll: true,\n          canReadOwn: true,\n          canDelete: true,\n        };\n      default:\n        return {\n          canCreate: false,\n          canReadAll: false,\n          canReadOwn: false,\n          canDelete: false,\n        };\n    }\n  };\n\n  const permissions = getPermissions();\n\n  const canDeleteTransaction = () => permissions.canDelete;\n  const canViewAllTransactions = () => permissions.canReadAll;\n  const isStaff = () => userRole === 'staff';\n  const isOperationsManager = () => userRole === 'operations_manager';\n  const isDirectorOrInvestor = () => ['director', 'investor'].includes(userRole);\n\n  return {\n    userRole,\n    permissions,\n    canDeleteTransaction,\n    canViewAllTransactions,\n    isStaff,\n    isOperationsManager,\n    isDirectorOrInvestor,\n  };\n}\n